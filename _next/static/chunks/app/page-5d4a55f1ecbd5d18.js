(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9013:function(e,t,s){Promise.resolve().then(s.bind(s,6433))},551:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r}});let a=s(1609);s(7437),s(2265);let n=a._(s(148));function r(e,t){var s;let a={loading:e=>{let{error:t,isLoading:s,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let r={...a,...t};return(0,n.default)({...r,modules:null==(s=r.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},912:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let a=s(5592);function n(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(t);return s}},148:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return d}});let a=s(7437),n=s(2265),r=s(912),c=s(1481);function l(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},s=(0,n.lazy)(()=>t.loader().then(l)),d=t.loading;function o(e){let l=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(c.PreloadCss,{moduleIds:t.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(r.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(n.Suspense,{fallback:l,children:i})}return o.displayName="LoadableComponent",o}},1481:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let a=s(7437),n=s(8512);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,n.getExpectedRequestStore)("next/dynamic css"),r=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,a.jsx)(a.Fragment,{children:r.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},6433:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var a=s(7437),n=s(2265),r=s(551),c=s.n(r),l=s(718),i=s(4624);let d=[{type:"impl",name:"HelloStarknetImpl",interface_name:"workshop_frontend::IHelloStarknet"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"interface",name:"workshop_frontend::IHelloStarknet",items:[{type:"function",name:"increase_balance",inputs:[{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"get_balance",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"reset_balance",inputs:[],outputs:[],state_mutability:"external"}]},{type:"event",name:"workshop_frontend::HelloStarknet::BalanceIncreased",kind:"struct",members:[{name:"sender",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"amount",type:"core::integer::u256",kind:"data"},{name:"new_balance",type:"core::integer::u256",kind:"data"}]},{type:"event",name:"workshop_frontend::HelloStarknet::Event",kind:"enum",variants:[{name:"BalanceIncreased",type:"workshop_frontend::HelloStarknet::BalanceIncreased",kind:"nested"}]}];var o={src:"/Puppet//_next/static/media/puppet_preview.82f41b7d.png"},u={src:"/Puppet//_next/static/media/gizmo_preview.1253c5ed.png"},m={src:"/Puppet//_next/static/media/versus.b298df6b.png"},p={src:"/Puppet//_next/static/media/back.33c5057d.png"},h={src:"/Puppet//_next/static/media/small_puppet.9a537536.png"},f={src:"/Puppet//_next/static/media/small_gizmo.c7725c5d.png"},x={src:"/Puppet//_next/static/media/select.be584483.png"},j=s(9767);c()(()=>s.e(420).then(s.bind(s,9420)),{loadableGenerated:{webpack:()=>[9420]},ssr:!1});var b=()=>{let{data:e,isLoading:t,isError:s}=(0,l.Ov)({blockIdentifier:"latest"}),{address:r}=(0,l.mA)(),{isLoading:c,isError:b,error:g,data:v}=(0,l.KQ)({address:r,watch:!0}),N="0x1c758616421a10f9df071a5d985c72e3907cf98d553204cf8dee354647c736",{data:y,refetch:_,isError:E,isLoading:k,error:P}=(0,l.uT)({functionName:"get_balance",args:[],abi:d,address:N,watch:!0,refetchInterval:1e3}),[C,O]=(0,n.useState)(0),{contract:S}=(0,l.cq)({abi:d,address:N}),w=(0,n.useMemo)(()=>{if(!r||!S)return[];let e=C||0;return[S.populate("increase_balance",[e])]},[S,r,C]),{send:A,data:T,isPending:I}=(0,l.pQ)({calls:w}),{data:M,status:L,isLoading:R,isError:G,error:U}=(0,l.VS)({hash:null==T?void 0:T.transaction_hash,watch:!0}),z=(0,n.useMemo)(()=>{if(S)try{return S.populate("reset_balance")}catch(e){console.error("Error populating reset_balance call:",e);return}},[S]),{send:D,isPending:B,data:H}=(0,l.pQ)({calls:z?[z]:[]}),V=(0,n.useMemo)(()=>new i.Gf({nodeUrl:j.env.NEXT_PUBLIC_RPC_URL}),[]),[Y,F]=(0,n.useState)([]),q=(0,n.useRef)(0),{data:Q}=(0,l.Ov)({refetchInterval:3e3}),J=(0,n.useCallback)(async(e,t)=>{if(!(t<=q.current))try{let s=q.current+1,a=await V.getEvents({address:e.address,from_block:{block_number:s},to_block:{block_number:t},chunk_size:500});a&&a.events&&F(e=>[...e,...a.events]),q.current=t}catch(e){console.error("Error checking for events:",e)}},[V]);(0,n.useEffect)(()=>{S&&Q&&J(S,Q)},[S,Q,J]),(0,n.useMemo)(()=>[...Y].reverse().slice(0,5),[Y]);let{connect:W,connectors:Z}=(0,l.$4)(),{disconnect:K}=(0,l.qL)(),{address:X}=(0,l.mA)(),[$,ee]=(0,n.useState)(!0),[et,es]=(0,n.useState)(!1),[ea,en]=(0,n.useState)(!1),[er,ec]=(0,n.useState)(null),[el,ei]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=setTimeout(()=>{es(!0),setTimeout(()=>ee(!1),1e3)},2e3);return()=>clearTimeout(e)},[]),(0,a.jsx)("div",{className:"game-screen",style:{opacity:et?1:0},children:ea?(0,a.jsx)("div",{className:"screen",children:el?(0,a.jsxs)(a.Fragment,{children:["Puppet"===er&&(0,a.jsxs)("div",{className:"puppet-page",children:[(0,a.jsx)("div",{className:"rotate-message",children:"PLEASE TURN YOUR DEVICE INTO LANDSCAPE MODE."}),(0,a.jsxs)("div",{className:"game-container",children:[(0,a.jsx)("div",{className:"back-button",children:(0,a.jsx)("img",{src:p.src,alt:"Back",onClick:()=>ei(!1)})}),(0,a.jsxs)("div",{className:"enemy-select-container",children:[(0,a.jsxs)("div",{className:"enemy-selector",children:[(0,a.jsx)("h4",{className:"player-text",id:"player-text",children:"Player"}),(0,a.jsx)("img",{src:h.src,alt:"Puppet"}),(0,a.jsx)("h3",{children:"PUPPET"}),(0,a.jsx)("p",{className:"player-description",children:"55 (67%)"})]}),(0,a.jsxs)("div",{className:"victims-container",children:[(0,a.jsx)("h2",{children:"SELECT YOUR ACTION"}),(0,a.jsxs)("div",{className:"victim-selector",children:[(0,a.jsx)("button",{className:"create-button",children:"CREATE GAME"}),(0,a.jsx)("button",{className:"join-button",children:"JOIN GAME"})]})]})]})]})]}),"Gizmo"===er&&(0,a.jsxs)("div",{className:"gizmo-page",children:[(0,a.jsx)("div",{className:"rotate-message",children:"PLEASE TURN YOUR DEVICE INTO LANDSCAPE MODE."}),(0,a.jsxs)("div",{className:"game-container",children:[(0,a.jsx)("div",{className:"back-button",children:(0,a.jsx)("img",{src:p.src,alt:"Back",onClick:()=>ei(!1)})}),(0,a.jsxs)("div",{className:"enemy-select-container",children:[(0,a.jsxs)("div",{className:"enemy-selector",children:[(0,a.jsx)("h4",{className:"player-text",id:"player-text",children:"Player"}),(0,a.jsx)("img",{src:f.src,alt:"Gizmo"}),(0,a.jsx)("h3",{children:"GIZMO"}),(0,a.jsx)("p",{className:"player-description",children:"55 (67%)"})]}),(0,a.jsxs)("div",{className:"victims-container",children:[(0,a.jsx)("h2",{children:"SELECT YOUR ACTION"}),(0,a.jsxs)("div",{className:"victim-selector",children:[(0,a.jsx)("button",{className:"create-button",children:"CREATE GAME"}),(0,a.jsx)("button",{className:"join-button",children:"JOIN GAME"})]})]})]})]})]})]}):(0,a.jsxs)("div",{className:"character-select-screen",children:[(0,a.jsx)("div",{className:"rotate-message",children:"PLEASE TURN YOUR DEVICE INTO LANDSCAPE MODE."}),(0,a.jsxs)("div",{className:"game-container",children:[(0,a.jsx)("div",{className:"back-button",children:(0,a.jsx)("img",{src:p.src,alt:"Back",onClick:()=>en(!1)})}),(0,a.jsxs)("div",{className:"character-select-container",children:[(0,a.jsxs)("div",{id:"puppet-selector",className:"character-selector",onClick:()=>{ec("Puppet"),ei(!0)},children:[(0,a.jsx)("img",{src:h.src,alt:"Puppet"}),(0,a.jsx)("h3",{children:"PUPPET"}),(0,a.jsx)("p",{className:"character-description",children:"55 (67%)"})]}),(0,a.jsxs)("div",{id:"gizmo-selector",className:"character-selector",onClick:()=>{ec("Gizmo"),ei(!0)},children:[(0,a.jsx)("img",{src:f.src,alt:"Gizmo"}),(0,a.jsx)("h3",{children:"GIZMO"}),(0,a.jsx)("p",{className:"character-description",children:"55 (67%)"})]})]}),(0,a.jsx)("div",{className:"select-container",children:(0,a.jsx)("img",{className:"select-svg",src:x.src,alt:"Select"})})]})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"character left-character",children:[(0,a.jsx)("div",{className:"character-name",children:"Puppet"}),(0,a.jsx)("img",{src:o.src,className:"App-left-character",alt:"Left Character"})]}),(0,a.jsxs)("div",{className:"vs-container",children:[(0,a.jsx)("img",{src:m.src,className:"App-vs",alt:"VS"}),(0,a.jsxs)("div",{className:"play-button-container",children:[(0,a.jsx)("button",{className:"start-game-button-text",onClick:()=>{X?(alert("Wallet Address: ".concat(X)),en(!0)):alert("Please connect your wallet")},children:"START GAME"}),Z.map((e,t)=>(0,a.jsx)("button",{className:"play-button",onClick:()=>W({connector:e}),children:X?"CONNECTED":"CONNECT"},t))]})]}),(0,a.jsxs)("div",{className:"character right-character",children:[(0,a.jsx)("div",{className:"character-name",children:"Gizmo"}),(0,a.jsx)("img",{src:u.src,className:"App-right-character",alt:"Right Character"})]})]})})}}},function(e){e.O(0,[255,125,357,971,23,744],function(){return e(e.s=9013)}),_N_E=e.O()}]);