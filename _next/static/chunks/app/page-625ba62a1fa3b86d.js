(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9013:function(e,t,a){Promise.resolve().then(a.bind(a,6433))},551:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=a(1609);a(7437),a(2265);let s=r._(a(148));function n(e,t){var a;let r={loading:e=>{let{error:t,isLoading:a,pastDelay:r}=e;return null}};"function"==typeof e&&(r.loader=e);let n={...r,...t};return(0,s.default)({...n,modules:null==(a=n.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},912:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let r=a(5592);function s(e){let{reason:t,children:a}=e;if("undefined"==typeof window)throw new r.BailoutToCSRError(t);return a}},148:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let r=a(7437),s=a(2265),n=a(912),c=a(1481);function i(e){return{default:e&&"default"in e?e.default:e}}let l={loader:()=>Promise.resolve(i(()=>null)),loading:null,ssr:!0},o=function(e){let t={...l,...e},a=(0,s.lazy)(()=>t.loader().then(i)),o=t.loading;function d(e){let i=o?(0,r.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,r.jsxs)(r.Fragment,{children:["undefined"==typeof window?(0,r.jsx)(c.PreloadCss,{moduleIds:t.modules}):null,(0,r.jsx)(a,{...e})]}):(0,r.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(a,{...e})});return(0,r.jsx)(s.Suspense,{fallback:i,children:l})}return d.displayName="LoadableComponent",d}},1481:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return n}});let r=a(7437),s=a(8512);function n(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let a=(0,s.getExpectedRequestStore)("next/dynamic css"),n=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files.filter(e=>e.endsWith(".css"));n.push(...t)}}return 0===n.length?null:(0,r.jsx)(r.Fragment,{children:n.map(e=>(0,r.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}},6433:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var r=a(7437),s=a(2265),n=a(551),c=a.n(n),i=a(718),l=a(4624);let o=[{type:"impl",name:"actions__ContractImpl",interface_name:"dojo::contract::interface::IContract"},{type:"interface",name:"dojo::contract::interface::IContract",items:[]},{type:"impl",name:"actions__DeployedContractImpl",interface_name:"dojo::meta::interface::IDeployedResource"},{type:"struct",name:"core::byte_array::ByteArray",members:[{name:"data",type:"core::array::Array::<core::bytes_31::bytes31>"},{name:"pending_word",type:"core::felt252"},{name:"pending_word_len",type:"core::integer::u32"}]},{type:"interface",name:"dojo::meta::interface::IDeployedResource",items:[{type:"function",name:"dojo_name",inputs:[],outputs:[{type:"core::byte_array::ByteArray"}],state_mutability:"view"}]},{type:"impl",name:"ActionsImpl",interface_name:"puppet_vs_gizmo::systems::actions::IActions"},{type:"interface",name:"puppet_vs_gizmo::systems::actions::IActions",items:[{type:"function",name:"create_game",inputs:[{name:"character",type:"core::integer::u8"},{name:"game_id",type:"core::integer::u32"}],outputs:[],state_mutability:"external"},{type:"function",name:"join_game",inputs:[{name:"game_id",type:"core::integer::u32"}],outputs:[],state_mutability:"external"},{type:"function",name:"throw",inputs:[{name:"game_id",type:"core::integer::u32"},{name:"power",type:"core::integer::u8"}],outputs:[],state_mutability:"external"}]},{type:"function",name:"dojo_init",inputs:[],outputs:[],state_mutability:"view"},{type:"impl",name:"WorldProviderImpl",interface_name:"dojo::contract::components::world_provider::IWorldProvider"},{type:"struct",name:"dojo::world::iworld::IWorldDispatcher",members:[{name:"contract_address",type:"core::starknet::contract_address::ContractAddress"}]},{type:"interface",name:"dojo::contract::components::world_provider::IWorldProvider",items:[{type:"function",name:"world_dispatcher",inputs:[],outputs:[{type:"dojo::world::iworld::IWorldDispatcher"}],state_mutability:"view"}]},{type:"impl",name:"UpgradeableImpl",interface_name:"dojo::contract::components::upgradeable::IUpgradeable"},{type:"interface",name:"dojo::contract::components::upgradeable::IUpgradeable",items:[{type:"function",name:"upgrade",inputs:[{name:"new_class_hash",type:"core::starknet::class_hash::ClassHash"}],outputs:[],state_mutability:"external"}]},{type:"constructor",name:"constructor",inputs:[]},{type:"event",name:"dojo::contract::components::upgradeable::upgradeable_cpt::Upgraded",kind:"struct",members:[{name:"class_hash",type:"core::starknet::class_hash::ClassHash",kind:"data"}]},{type:"event",name:"dojo::contract::components::upgradeable::upgradeable_cpt::Event",kind:"enum",variants:[{name:"Upgraded",type:"dojo::contract::components::upgradeable::upgradeable_cpt::Upgraded",kind:"nested"}]},{type:"event",name:"dojo::contract::components::world_provider::world_provider_cpt::Event",kind:"enum",variants:[]},{type:"event",name:"puppet_vs_gizmo::systems::actions::actions::Event",kind:"enum",variants:[{name:"UpgradeableEvent",type:"dojo::contract::components::upgradeable::upgradeable_cpt::Event",kind:"nested"},{name:"WorldProviderEvent",type:"dojo::contract::components::world_provider::world_provider_cpt::Event",kind:"nested"}]}];var d={src:"/Puppet//_next/static/media/puppet_preview.82f41b7d.png"},u={src:"/Puppet//_next/static/media/gizmo_preview.1253c5ed.png"},p={src:"/Puppet//_next/static/media/versus.b298df6b.png"},m={src:"/Puppet//_next/static/media/back.33c5057d.png"},h={src:"/Puppet//_next/static/media/small_puppet.9a537536.png"},f={src:"/Puppet//_next/static/media/small_gizmo.c7725c5d.png"},y={src:"/Puppet//_next/static/media/select.be584483.png"},j=a(9767);c()(()=>a.e(420).then(a.bind(a,9420)),{loadableGenerated:{webpack:()=>[9420]},ssr:!1});var g=()=>{let{data:e,isLoading:t,isError:a}=(0,i.Ov)({blockIdentifier:"latest"}),{address:n}=(0,i.mA)(),{isLoading:c,isError:g,error:_,data:v}=(0,i.KQ)({address:n,watch:!0}),b="0x0409f17fbe2145d007c6d18731fa9919e943a60230fe5c2647f702615a49e4f9",{data:x,refetch:N,isError:E,isLoading:P,error:C}=(0,i.uT)({functionName:"get_balance",args:[],abi:o,address:b,watch:!0,refetchInterval:1e3}),[k,w]=(0,s.useState)(0),{contract:I}=(0,i.cq)({abi:o,address:b}),O=(0,s.useMemo)(()=>{if(!n||!I)return[];let e=k||0;return[I.populate("increase_balance",[e])]},[I,n,k]),{send:A,data:S,isPending:T}=(0,i.pQ)({calls:O}),{data:M,status:R,isLoading:U,isError:L,error:G}=(0,i.VS)({hash:null==S?void 0:S.transaction_hash,watch:!0}),D=(0,s.useMemo)(()=>{if(I)try{return I.populate("reset_balance")}catch(e){console.error("Error populating reset_balance call:",e);return}},[I]),{send:z,isPending:B,data:W}=(0,i.pQ)({calls:D?[D]:[]}),V=(0,s.useMemo)(()=>new l.Gf({nodeUrl:j.env.NEXT_PUBLIC_RPC_URL}),[]),[Y,F]=(0,s.useState)([]),q=(0,s.useRef)(0),{data:Q}=(0,i.Ov)({refetchInterval:3e3}),H=(0,s.useCallback)(async(e,t)=>{if(!(t<=q.current))try{let a=q.current+1,r=await V.getEvents({address:e.address,from_block:{block_number:a},to_block:{block_number:t},chunk_size:500});r&&r.events&&F(e=>[...e,...r.events]),q.current=t}catch(e){console.error("Error checking for events:",e)}},[V]);(0,s.useEffect)(()=>{I&&Q&&H(I,Q)},[I,Q,H]),(0,s.useMemo)(()=>[...Y].reverse().slice(0,5),[Y]);let{connect:J,connectors:Z}=(0,i.$4)(),{disconnect:K}=(0,i.qL)(),{address:X}=(0,i.mA)(),[$,ee]=(0,s.useState)(!0),[et,ea]=(0,s.useState)(!1),[er,es]=(0,s.useState)(!1),[en,ec]=(0,s.useState)(null),[ei,el]=(0,s.useState)(!1),[eo,ed]=(0,s.useState)(0),[eu,ep]=(0,s.useState)(0),em=async()=>{if(I)try{let e=Math.floor(1e7*Math.random());console.log("Generated Game ID:",e);let t=I.populate("create_game",["Puppet"===en?1:2,e]);await A([t])}catch(e){console.error("Error creating game:",e)}};return(0,s.useEffect)(()=>{let e=setTimeout(()=>{ea(!0),setTimeout(()=>ee(!1),1e3)},2e3);return()=>clearTimeout(e)},[]),(0,r.jsx)("div",{className:"game-screen ".concat("Puppet"===en?"puppet-bg":"Gizmo"===en?"gizmo-bg":""),style:{opacity:et?1:0},children:er?(0,r.jsx)("div",{className:"screen",children:ei?(0,r.jsxs)(r.Fragment,{children:["Puppet"===en&&(0,r.jsxs)("div",{className:"puppet-page",children:[(0,r.jsx)("div",{className:"rotate-message",children:"PLEASE TURN YOUR DEVICE INTO LANDSCAPE MODE."}),(0,r.jsxs)("div",{className:"game-container",children:[(0,r.jsx)("div",{className:"back-button",children:(0,r.jsx)("img",{src:m.src,alt:"Back",onClick:()=>el(!1)})}),(0,r.jsxs)("div",{className:"enemy-select-container",children:[(0,r.jsxs)("div",{className:"enemy-selector",children:[(0,r.jsx)("h4",{className:"player-text",id:"player-text",children:"Player"}),(0,r.jsx)("img",{src:h.src,alt:"Puppet"}),(0,r.jsx)("h3",{children:"PUPPET"}),(0,r.jsx)("p",{className:"player-description",children:"55 (67%)"})]}),(0,r.jsxs)("div",{className:"victims-container",children:[(0,r.jsx)("h2",{children:"SELECT YOUR ACTION"}),(0,r.jsxs)("div",{className:"victim-selector",children:[(0,r.jsx)("button",{className:"create-button",onClick:em,children:"CREATE GAME"}),(0,r.jsx)("button",{className:"join-button",children:"JOIN GAME"})]})]})]})]})]}),"Gizmo"===en&&(0,r.jsxs)("div",{className:"gizmo-page",children:[(0,r.jsx)("div",{className:"rotate-message",children:"PLEASE TURN YOUR DEVICE INTO LANDSCAPE MODE."}),(0,r.jsxs)("div",{className:"game-container",children:[(0,r.jsx)("div",{className:"back-button",children:(0,r.jsx)("img",{src:m.src,alt:"Back",onClick:()=>el(!1)})}),(0,r.jsxs)("div",{className:"enemy-select-container",children:[(0,r.jsxs)("div",{className:"enemy-selector",children:[(0,r.jsx)("h4",{className:"player-text",id:"player-text",children:"Player"}),(0,r.jsx)("img",{src:f.src,alt:"Gizmo"}),(0,r.jsx)("h3",{children:"GIZMO"}),(0,r.jsx)("p",{className:"player-description",children:"55 (67%)"})]}),(0,r.jsxs)("div",{className:"victims-container",children:[(0,r.jsx)("h2",{children:"SELECT YOUR ACTION"}),(0,r.jsxs)("div",{className:"victim-selector",children:[(0,r.jsx)("button",{className:"create-button",onClick:em,children:"CREATE GAME"}),(0,r.jsx)("button",{className:"join-button",children:"JOIN GAME"})]})]})]})]})]})]}):(0,r.jsxs)("div",{className:"character-select-screen",children:[(0,r.jsx)("div",{className:"rotate-message",children:"PLEASE TURN YOUR DEVICE INTO LANDSCAPE MODE."}),(0,r.jsxs)("div",{className:"game-container",children:[(0,r.jsx)("div",{className:"back-button",children:(0,r.jsx)("img",{src:m.src,alt:"Back",onClick:()=>es(!1)})}),(0,r.jsxs)("div",{className:"character-select-container",children:[(0,r.jsxs)("div",{id:"puppet-selector",className:"character-selector",onClick:()=>{ec("Puppet"),el(!0)},children:[(0,r.jsx)("img",{src:h.src,alt:"Puppet"}),(0,r.jsx)("h3",{children:"PUPPET"}),(0,r.jsx)("p",{className:"character-description",children:"55 (67%)"})]}),(0,r.jsxs)("div",{id:"gizmo-selector",className:"character-selector",onClick:()=>{ec("Gizmo"),el(!0)},children:[(0,r.jsx)("img",{src:f.src,alt:"Gizmo"}),(0,r.jsx)("h3",{children:"GIZMO"}),(0,r.jsx)("p",{className:"character-description",children:"55 (67%)"})]})]}),(0,r.jsx)("div",{className:"select-container",children:(0,r.jsx)("img",{className:"select-svg",src:y.src,alt:"Select"})})]})]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"character left-character",children:[(0,r.jsx)("div",{className:"character-name",children:"Puppet"}),(0,r.jsx)("img",{src:d.src,className:"App-left-character",alt:"Left Character"})]}),(0,r.jsxs)("div",{className:"vs-container",children:[(0,r.jsx)("img",{src:p.src,className:"App-vs",alt:"VS"}),(0,r.jsxs)("div",{className:"play-button-container",children:[(0,r.jsx)("button",{className:"start-game-button-text",onClick:()=>{X?(alert("Wallet Address: ".concat(X)),es(!0)):alert("Please connect your wallet")},children:"START GAME"}),Z.map((e,t)=>(0,r.jsx)("button",{className:"play-button",onClick:()=>J({connector:e}),children:X?"CONNECTED":"CONNECT"},t))]})]}),(0,r.jsxs)("div",{className:"character right-character",children:[(0,r.jsx)("div",{className:"character-name",children:"Gizmo"}),(0,r.jsx)("img",{src:u.src,className:"App-right-character",alt:"Right Character"})]})]})})}}},function(e){e.O(0,[255,125,357,971,23,744],function(){return e(e.s=9013)}),_N_E=e.O()}]);